server:
  port: 8080 # Gateway server port

spring:
  application:
    name: bilibili-gateway # Name of the Gateway service
  data:
    redis:
      database: 0 # Redis 数据库索引（默认为 0）
      host: 192.168.33.10
      #Redis 服务器地址
      port: 6379 # Redis 服务器连接端口
      #      password: qwe123!@# # Redis 服务器连接密码（默认为空）
      timeout: 5s # 读超时时间
      connect-timeout: 5s # 链接超时时间
      lettuce:
        pool:
          max-active: 200 # 连接池最大连接数
          max-wait: -1ms # 连接池最大阻塞等待时间（使用负值表示没有限制）
          min-idle: 0 # 连接池中的最小空闲连接
          max-idle: 10 # 连接池中的最大空闲连接

  cloud:
    gateway:
      # Enable service discovery via Nacos
      discovery:
        locator:
          enabled: true # Enables dynamic routing via service discovery (e.g., Nacos)
      routes:
        - id: oss-service
          uri: lb://bilibili-oss-service # Verify actual service name in Nacos
          predicates:
            - Path=/api/oss/**

        - id: user-service
          uri: lb://bilibili-user-service # Verify actual service name in Nacos
          predicates:
            - Path=/api/user/**
        - id: comments-service
          uri: lb://bilibili-comments-service # Verify actual service name in Nacos
          predicates:
            - Path=/api/comments/**
        - id: auth-service
          uri: lb://bilibili-auth-service # Verify actual service name in Nacos
          predicates:
            - Path=/api/auth/**
    #          filters:
    #            - name: JwtAuthenticationFilter
    #              args:
    #                requireAuth: false  # Auth endpoints don't need JWT
    #            - StripPrefix=1

    nacos:
      discovery:
        enabled: true
        server-addr: 192.168.33.10:8848
        namespace: public

        # Add other discovery-specific properties here if needed
        group: DEFAULT_GROUP
      #        cluster-name: DEFAULT
      config:
        server-addr: 192.168.33.10:8848 # Nacos server address for configuration management
        file-extension: yaml # File extension for configurations stored in Nacos
  main:
    lazy-initialization: true

#  jwt:
#    secret-key: "your-secret-key" # Secret key used for JWT signing
#    expiration-time: 86400000 # JWT expiration time (1 day in milliseconds)

logging:
  level:
    org.springframework.web: info # Enable detailed logging for request handling

# if you are no need for jwtFilter so set the false
# will not use the Filter
jwtFilter:
  auto: true
